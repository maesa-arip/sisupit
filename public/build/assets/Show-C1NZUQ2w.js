import{j as e,$ as f,b as j,S as b}from"./app-CHK1mVWb.js";import{G as g}from"./GetFineStatusBadge-CTWUDRLN.js";import{H as _}from"./HeaderTitle-DKL2q3YR.js";import{A as k,b as N,a as y}from"./alert-CvwFlrpZ.js";import{B as i,b as r,F as v}from"./button-Bwo93mn_.js";import{C as c,c as T,a as m,b as w}from"./card-mC5MPmjx.js";import{T as C,a as P,b as x,c as t,d as S,e as n}from"./table-D-8hqHOa.js";import{A}from"./AppLayout-Bv4jgXpO.js";import"./lodash-FzZv2o46.js";import{u as s}from"./index-Cs4herHx.js";import{e as B}from"./Banner-CQxhZh_L.js";import{I as D}from"./IconCircleCheck-BG8fhmhf.js";import"./badge-CV2P4H9V.js";import"./ApplicationLogo--6UpUB91.js";import"./createReactComponent-UcVAdvOV.js";import"./ThemeSwitcher-B0GxQ3sQ.js";import"./index-AtiXubYi.js";import"./check-BtguU8BR.js";function H(a){const{SUCCESS:d}=v,u=async()=>{try{const h=(await j.post(route("payments.create"),{order_id:a.return_book.return_book_code,gross_amount:a.return_book.fine.total_fee,first_name:a.return_book.user.name,last_name:"",email:a.return_book.user.email})).data.snapToken;window.snap.pay(h,{onSuccess:l=>{s.success("Pembayaran sukses"),b.get(route("payments.success"))},onPending:l=>{s.warning("Pembayaran pending")},onError:l=>{s.error("Kesalahan pembayaran")},onClose:l=>{s.info("Pembayaran ditutup")}})}catch(o){s.error(`Kesalahan pembayaran ${o}`)}};return e.jsxs("div",{className:"flex flex-col w-full pb-32 space-y-4",children:[e.jsx("div",{className:"flex flex-col items-start justify-between gap-y-4 lg:flex-row lg:items-center",children:e.jsx(_,{title:a.page_settings.title,subtitle:a.page_settings.subtitle,icon:B})}),e.jsxs(c,{children:[e.jsxs(T,{className:"flex flex-col gap-6 text-sm border-b border-muted lg:flex-row lg:items-center lg:justify-between lg:px-6",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Kode Peminjaman"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.loan.loan_code})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Peminjam"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.user.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Tanggal Peminjaman"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.loan.loan_date})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Kode Pengembalian"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.return_book_code})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-foreground",children:"Status"}),e.jsx("dd",{className:"mt-1 text-muted-foreground",children:a.return_book.status})]})]}),e.jsx(m,{className:"py-6 divide-y divide-gray-200",children:e.jsxs("div",{className:"flex items-center lg:items-start",children:[e.jsx("div",{className:"flex-shrink-0 w-20 h-20 overflow-hidden bg-gray-200 rounded-lg lg:h-40 lg:w-40",children:e.jsx("img",{src:a.return_book.book.cover,alt:a.return_book.book.title,className:"object-cover object-center w-full h-full"})}),e.jsxs("div",{className:"flex-1 ml-6 text-sm",children:[e.jsx("h5",{className:"text-lg font-bold leading-relaxed",children:a.return_book.book.title}),e.jsx("p",{className:"hidden text-muted-foreground lg:mt-2 lg:block",children:a.return_book.book.synopsis})]})]})}),e.jsxs(w,{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"text-green-500 size-5"}),e.jsxs("p",{className:"ml-2 text-sm font-medium text-muted-foreground",children:["Dikembalikan pada tanggal"," ",e.jsx("time",{dateTime:a.return_book.return_date,children:a.return_date})]})]}),e.jsx("div",{className:"flex pt-6 text-sm font-medium lg:items-center lg:border-none lg:pt-0",children:e.jsx("div",{className:"flex justify-center flex-1",children:e.jsx(i,{variant:"link",children:e.jsx(f,{href:route("front.books.show",[a.return_book.book.slug]),children:"Lihat Buku"})})})})]})]}),a.return_book.fine&&e.jsx("h2",{className:"font-semibold leading-relaxed text-foreground",children:"Informasi Denda"}),a.return_book.fine&&a.return_book.fine.payment_status!==d&&e.jsxs(k,{variant:"destructive",children:[e.jsx(N,{children:"Informasi"}),e.jsx(y,{children:"Setelah melalui pengecekan peminjamamn buka anda terkena denda. Harap untuk melunasi pembayaran denda terlebih dahulu"})]}),a.return_book.fine&&e.jsx(c,{children:e.jsx(m,{className:"p-6 space-y-20",children:e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-6 rounded-lg",children:e.jsxs("dl",{className:"flex flex-col text-sm leading-relaxed gap-x-12 gap-y-4 text-foreground lg:flex-row",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Kode Peminjaman"}),e.jsx("dd",{children:a.return_book.loan.loan_code})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Tanggal Peminjaman"}),e.jsx("dd",{children:e.jsx("time",{dateTime:a.return_book.loan.loan_date,children:a.return_book.loan.loan_date})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Batas Pengembalian"}),e.jsx("dd",{children:e.jsx("time",{dateTime:a.return_book.loan.due_date,children:a.return_book.loan.due_date})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("dt",{className:"font-semibold",children:"Total Denda"}),e.jsx("dd",{className:"text-red-500",children:r(a.return_book.fine.total_fee)})]})]})}),e.jsxs(C,{className:"w-full mt-6",children:[e.jsx(P,{children:e.jsxs(x,{children:[e.jsx(t,{children:"Pengguna"}),e.jsx(t,{children:"Buku"}),e.jsx(t,{children:"Denda Keterlambatan"}),e.jsx(t,{children:"Denda Lain-Lain"}),e.jsx(t,{children:"Total Denda"}),e.jsx(t,{children:"Status Pembayaran"}),a.return_book.fine.payment_status!=="Sukses"&&e.jsx(t,{children:"Aksi"})]})}),e.jsx(S,{children:e.jsxs(x,{children:[e.jsx(n,{children:a.return_book.user.name}),e.jsx(n,{children:a.return_book.book.title}),e.jsxs(n,{children:[r(a.return_book.fine.late_fee),e.jsxs("span",{className:"text-red-500",children:["(",a.return_book.daysLate,")"]})]}),e.jsxs(n,{children:[r(a.return_book.fine.other_fee),e.jsxs("span",{className:"text-red-500",children:["(",a.return_book.return_book_check.condition,")"]})]}),e.jsx(n,{children:r(a.return_book.fine.total_fee)}),e.jsx(n,{children:e.jsx(g,{status:a.return_book.fine.payment_status})}),a.return_book.fine.payment_status!==d&&e.jsx(n,{children:e.jsx(i,{variant:"outline",onClick:u,children:"Bayar"})})]})})]}),e.jsxs("p",{className:"mt-12 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Catatan : "}),a.return_book.return_book_check.notes]})]})})})]})}H.layout=a=>e.jsx(A,{children:a,title:a.props.page_settings.title});export{H as default};
